<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="custom_purchase_order_form" model="ir.ui.view">
	    <field name="name">Custpom Purchase order inherit form</field>
	    <field name="model">purchase.order</field>
	    <field name="inherit_id" ref="purchase.purchase_order_form"/>
	    <field name="arch" type="xml">
	    	<xpath expr="//button[@name='print_quotation']" position="replace">
	    		 <button name="print_quotation" string="Print RFQ" type="object"  class="oe_highlight" groups="base.group_user" data-hotkey="k"
	    		 	attrs="{'invisible':['|',('is_requisition', '=', True),('state', '!=', 'draft')]}"/>
	    	</xpath>
	    	<xpath expr="//button[@id='draft_confirm']" position="replace">
	    		 <button name="button_confirm" type="object" string="Confirm Order" id="draft_confirm" 
	    		   	attrs="{'invisible':['|',('is_requisition', '=', True),('state', '!=', 'draft')]}"/>
	    	</xpath>

	    	<xpath expr="//button[@id='bid_confirm']" position="replace">
	    	    <button name="button_confirm" type="object" string="Confirm Order" class="oe_highlight" id="bid_confirm" data-hotkey="v" 
	    	    	attrs="{'invisible':['|',('is_requisition', '=', True),('state', '!=', 'sent')]}"/>
          	</xpath>
	    	<xpath expr="//button[@name='action_rfq_send']" position="replace">
	    		<button name="action_rfq_send" string="Send PO by Email" type="object" context="{'send_rfq':False}" class="oe_highlight" data-hotkey="g" 
	    			attrs="{'invisible':['|',('state', '!=', 'draft'),('state2', '!=', 'draft')]}"/>

	    	</xpath>
	    	<xpath expr="//button[@name='button_cancel']" position="replace">
	    		 <button name="button_cancel" string="Cancel" type="object" data-hotkey="x" attrs="{'invisible':[('is_requisition', '=', True)]}"/>
	    	</xpath>

	    	<xpath expr="//button[@name='action_create_invoice']" position="after">
	    		 <button name="action_retained_warranty" string="Create Invoice Retained" type="object"
	    		  attrs="{'invisible':['|',('state', '!=', 'ceo_approve'), ('retained_status', '=', 'no')]}"/>
	    	</xpath>

	    	<xpath expr="//header/field[@name='state']" position="replace">
	    	 	<field name="state" widget="statusbar" statusbar_visible="draft,sent,purchase" readonly="1" attrs="{'invisible':[('is_requisition', '=', True)]}"/>
	    	 </xpath>
	    	<xpath expr="//form/sheet/group/group/field[@name='partner_ref']" position="after">
	    		<field name="is_requisition" invisible="1"/>
	    	</xpath>

	    	<xpath expr="//form/sheet/group/group/field[@name='partner_ref']" position="after">
	    		<field name="is_requisition" invisible="1"/>
	    	</xpath>
	    	<xpath expr="//div[@name='reminder']" position="after">
	    		<field name="project_id" options="{'no_create': True, 'no_create_edit':True}" required="True"
	    			attrs="{'invisible':[('is_requisition', '=', False)], 'required':[('is_requisition', '=', True)], 'readonly':[('state', '!=', 'draft')]}"/>
	    		<field name="analytic_id" invisible="1"/>
	    	</xpath>
	    	



	    	<xpath expr="//button[@name='action_rfq_send']" position="before">
	    		<button name="button_submit" type="object" string="Submit" class="btn-primary" attrs="{'invisible':['|',('is_requisition', '=', False),('state2', '!=', 'sent_rfq')]}" 
	    			groups="custom_purchase_order.purchase_group_submit"/>


	    	<button name="button_procurment_contract" type="object"  string="procurement and Contract" class="btn-primary" 
	    		attrs="{'invisible':['|',('is_requisition', '=', False),('state2', '!=', 'submit')]}" groups="custom_purchase_order.purchase_group_procurment_contract"/>	

	    	<button name="button_project_manager" type="object"  string="Project Manager" class="btn-primary" 
	    		attrs="{'invisible':['|',('is_requisition', '=', False),('state2', '!=', 'procurment')]}" groups="custom_purchase_order.purchase_group_project_manager"/>

	    	<button name="button_supply_chain_manager" type="object"  string="Supply Chain Manager" class="btn-primary" 
				attrs="{'invisible':['|',('is_requisition', '=', False),('state2', '!=', 'project')]}" groups="custom_purchase_order.purchase_group_supply_chain_manager"/>

			<button name="button_chief_execute_officer" type="object"  string="Confirm CEO"   class="btn-primary" 
				attrs="{'invisible':['|',('is_requisition', '=', False),('state2', '!=', 'supply_chain')]}" groups="custom_purchase_order.purchase_group_chief_execute_officer"/>
	    	</xpath>
	    	<xpath expr="//header/field[@name='state']" position="after">
	    		<field name="state2" widget="statusbar" statusbar_visible="draft" readonly="1" attrs="{'invisible':[('is_requisition', '=', False)]}"/>
	    	</xpath> 
	    	<xpath expr="//form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_unit']" position="after">
	    		<field name="retained_warranty"  readonly="1" force_save="1"/>
	    		<field name="qty_retained" invisible="1"/>
	    		<field name="is_requisition" invisible="1"/>
	    	</xpath>
	    	<xpath expr="//form/sheet/notebook/page/field[@name='order_line']" position="attributes">
	    		<attribute name="context">{'default_account_analytic_id':2}</attribute>
	    	</xpath>

	    	<xpath expr="//form/sheet/group/group/field[@name='partner_ref']" position="after">	
	    		<field name="retained_warranty" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
	    		<field name="percentage" attrs="{'invisible':[('is_requisition', '=', False)], 'readonly':[('state', '!=', 'draft')]}"/>
	    		<field name="retained_status" force_save="1" invisible="1"/>
	    	</xpath>
	    	<field name="currency_id" position="after">
	    		<field name="account_move_id" invisible="1"/>
	    	</field>
	    </field>
	</record>
	<record id="custom_purchase_order_tree" model="ir.ui.view">
	    <field name="name">Custom Purchase order inherit Tree</field>
	    <field name="model">purchase.order</field>
	    <field name="inherit_id" ref="purchase.purchase_order_kpis_tree"/>
	    <field name="arch" type="xml">
	    	<xpath expr="//tree/field[@name='state']" position="after">
	    		<field name="state2" string="PO Status"/>
	    	</xpath>
	    </field>
	</record>
</odoo>

 
